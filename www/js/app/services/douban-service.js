// Generated by CoffeeScript 1.7.1
(function() {
  var DoubanService, libr;

  libr = angular.module('libr.services.douban', []);

  DoubanService = (function() {
    DoubanService.$inject = ['$http'];

    function DoubanService($http) {
      this.$http = $http;
    }

    DoubanService.prototype.userInfo = function(user, callback, error) {
      return this.$http({
        url: "http://api.douban.com/v2/user/" + user,
        method: 'GET',
        timeout: 10000
      }).success(function(data, status, headers, config) {
        if (status === 200) {
          return callback(data);
        } else {
          return error(data);
        }
      }).error(function(data) {
        return error(data);
      });
    };

    DoubanService.prototype.submitUser = function(user, callback, error) {
      var email, token;
      email = localStorage.getItem('email');
      token = localStorage.getItem('token');
      return this.$http({
        url: "http://libr.herokuapp.com/api/v1/link/douban/" + user + "?user_email=" + email + "&user_token=" + token,
        method: 'POST',
        timeout: 10000
      }).success(function(data, status, headers, config) {
        return callback(data);
      }).error(function(data) {
        return error(data);
      });
    };

    return DoubanService;

  })();

  libr.service('DoubanService', DoubanService);

}).call(this);
