// Generated by CoffeeScript 1.7.1
(function() {
  var BooksController, libr,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  libr = angular.module('libr.controllers.books', []);

  BooksController = (function() {
    BooksController.$inject = ['$scope', 'Books', 'ScanService'];

    function BooksController($scope, Books, ScanService) {
      this.$scope = $scope;
      this.Books = Books;
      this.refresh = __bind(this.refresh, this);
      this.Books.query({}, (function(_this) {
        return function(data) {
          return _this.$scope.books = data.books;
        };
      })(this));
      this.$scope.rightButtons = [
        {
          type: 'button  icon ion-camera',
          tap: (function(_this) {
            return function(e) {
              return ScanService.scan(function(result) {
                navigator.notification.alert("添加图书《" + result.book.name + "》成功", null, "Libr", "确定");
                return _this.$scope.books.unshift(result.book);
              });
            };
          })(this)
        }
      ];
      this.$scope.onRefresh = this.refresh;
    }

    BooksController.prototype.refresh = function() {
      this.Books.query({}, (function(_this) {
        return function(data) {};
      })(this));
      return alert('没有新书了。。。');
    };

    return BooksController;

  })();

  libr.controller('BooksController', BooksController);

}).call(this);
