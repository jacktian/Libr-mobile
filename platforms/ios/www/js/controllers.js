// Generated by CoffeeScript 1.7.1
(function() {
  var BookDetailController, libr,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  libr = angular.module('libr.controllers', ['ionic']);

  BookDetailController = (function() {
    BookDetailController.$inject = ['$scope', '$stateParams', 'BookService', '$window', '$ionicModal'];

    function BookDetailController($scope, $stateParams, BookService, $window, $ionicModal) {
      this.$scope = $scope;
      this.$stateParams = $stateParams;
      this.BookService = BookService;
      this.$ionicModal = $ionicModal;
      this.closeCommentDialog = __bind(this.closeCommentDialog, this);
      this.openCommentDialog = __bind(this.openCommentDialog, this);
      this.$scope.openDialog = this.openCommentDialog;
      this.$scope.closeDialog = this.closeCommentDialog;
      this.$scope.rightButtons = [];
      this.$scope.leftButtons = [
        {
          type: 'button-icon icon ion-arrow-left-c',
          tap: (function(_this) {
            return function() {
              return $window.history.back();
            };
          })(this)
        }
      ];
      this.$ionicModal.fromTemplateUrl('templates/modal/comment.html', (function(_this) {
        return function(modal) {
          return _this.$scope.modal = modal;
        };
      })(this), {
        scope: this.$scope,
        animation: 'slide-in-up'
      });
      BookService.getBook(this.$stateParams.isbn).success((function(_this) {
        return function(result) {
          _this.$scope.book = result;
          return _this.$scope.bookName = _this.$scope.book.name;
        };
      })(this));
      this.$scope.$on('$destroy', (function(_this) {
        return function() {
          return _this.$scope.modal.remove();
        };
      })(this));
    }

    BookDetailController.prototype.openCommentDialog = function() {
      return this.$scope.modal.show();
    };

    BookDetailController.prototype.closeCommentDialog = function() {
      return this.$scope.modal.hide();
    };

    return BookDetailController;

  })();

  libr.controller('BookDetailController', BookDetailController);

}).call(this);
